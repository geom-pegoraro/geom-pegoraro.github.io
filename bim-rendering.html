<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geom. Pegoraro Alex ‚Äî DWG ‚Üí BIM & Rendering</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,300;0,400;0,500;0,600;1,300&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg:       #0f1117;
    --bg2:      #161b26;
    --bg3:      #1c2233;
    --border:   rgba(255,255,255,0.07);
    --border2:  rgba(255,255,255,0.13);
    --text:     #dde4f0;
    --muted:    #6e7d96;
    --dim:      #3d4a5e;
    --acc:      #1a5fa8;
    --acc-s:    rgba(26,95,168,0.10);
    --acc-b:    rgba(26,95,168,0.30);
    --acc2:     #3a9bd4;
    --acc2-s:   rgba(58,155,212,0.09);
    --acc2-b:   rgba(58,155,212,0.28);
    --render:   #1a7a5e;
    --render-s: rgba(26,122,94,0.10);
    --render-b: rgba(26,122,94,0.30);
    --render2:  #22c9a0;
    --font: 'Inter', sans-serif;
    --mono: 'DM Mono', monospace;
    --r: 3px;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  html { scroll-behavior: smooth; }
  body { background: var(--bg); color: var(--text); font-family: var(--font); font-weight: 400; font-size: 15px; line-height: 1.65; -webkit-font-smoothing: antialiased; overflow-x: hidden; }
    #bg-canvas {
    position: fixed; inset: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 0;
  }
  .wrap { max-width: 840px; margin: 0 auto; padding: 0 22px; position: relative; z-index: 1; }

  h1 { font-size: clamp(2rem, 4.5vw, 3rem); font-weight: 600; line-height: 1.12; letter-spacing: -0.03em; color: #fff; }
  h2 { font-size: clamp(1.2rem, 2.2vw, 1.55rem); font-weight: 600; letter-spacing: -0.02em; color: #fff; margin-bottom: 24px; }
  .label-tag { display: none; margin: 0; padding: 0; }

  header { position: relative; z-index: 1; border-bottom: 1px solid var(--border); padding: 17px 0; }
  .hdr { max-width: 840px; margin: 0 auto; padding: 0 22px; display: flex; justify-content: space-between; align-items: center; gap: 12px; flex-wrap: wrap; }
  .hdr-name { font-size: 0.9rem; font-weight: 600; color: #fff; letter-spacing: -0.01em; }
  .hdr-sub { font-weight: 400; font-family: var(--mono); font-size: 0.62rem; color: var(--muted); letter-spacing: 0.08em; text-transform: uppercase; margin-top: 2px; }
  .hdr-back { font-weight: 400; font-family: var(--mono); font-size: 0.62rem; letter-spacing: 0.1em; text-transform: uppercase; color: var(--acc2); border: 1px solid var(--acc-b); background: var(--acc-s); padding: 5px 13px; border-radius: 2px; text-decoration: none; transition: background 0.15s; }
  .hdr-back:hover { background: rgba(26,95,168,0.2); }

  .hero { padding: 80px 0 64px; border-bottom: 1px solid var(--border); position: relative; z-index: 1; }
  .hero-eye { font-family: var(--mono); font-size: 0.67rem; letter-spacing: 0.14em; text-transform: uppercase; color: var(--acc2); margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
  .hero-eye::before { content: ''; display: block; width: 26px; height: 1px; background: var(--acc2); flex-shrink: 0; }
  .hero h1 { margin-bottom: 20px; }
  .hero h1 .ca  { color: var(--acc); }
  .hero h1 .ca2 { color: var(--render2); }
  .hero-desc { font-weight: 400; font-size: 0.97rem; color: var(--muted); max-width: 500px; line-height: 1.8; margin-bottom: 36px; }
  .btn { display: inline-block; background: var(--acc); color: #fff; text-decoration: none; padding: 13px 28px; font-size: 0.82rem; font-weight: 500; letter-spacing: 0.07em; text-transform: uppercase; border-radius: var(--r); border: 1px solid var(--acc); transition: background 0.16s, color 0.16s; cursor: pointer; font-family: var(--font); }
  .btn:hover { background: transparent; color: var(--acc2); border-color: var(--acc2); }

  .kpis { margin-top: 52px; padding-top: 36px; border-top: 1px solid var(--border); display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
  .kpi { border-left: 1px solid var(--border); padding-left: 18px; }
  .kpi-v { font-size: 2rem; font-weight: 600; color: #fff; letter-spacing: -0.03em; line-height: 1; margin-bottom: 4px; }
  .kpi-l { font-weight: 400; font-family: var(--mono); font-size: 0.62rem; color: var(--muted); letter-spacing: 0.08em; text-transform: uppercase; }

  .sec { padding: 44px 0; border-bottom: 1px solid var(--border); position: relative; z-index: 1; }

  /* Tabs per selezionare il piano */
  .tab-row { display: flex; gap: 0; border: 1px solid var(--border); border-radius: var(--r); overflow: hidden; margin-bottom: 32px; }
  .tab-btn { flex: 1; background: var(--bg2); border: none; border-right: 1px solid var(--border); color: var(--muted); font-family: var(--mono); font-size: 0.68rem; letter-spacing: 0.1em; text-transform: uppercase; padding: 14px 10px; cursor: pointer; transition: background 0.15s, color 0.15s; }
  .tab-btn:last-child { border-right: none; }
  .tab-btn.active-render { background: var(--render-s); color: var(--render2); border-bottom: 2px solid var(--render); }
  .tab-btn.active-bim    { background: var(--acc-s);    color: var(--acc2);    border-bottom: 2px solid var(--acc); }

  .plan-panel { display: none; }
  .plan-panel.active { display: block; }

  .box-acc { background: var(--acc-s); border: 1px solid var(--acc-b); border-left: 3px solid var(--acc); border-radius: var(--r); padding: 22px 26px; margin-bottom: 20px; }
  .box-acc.green { background: var(--render-s); border-color: var(--render-b); border-left-color: var(--render); }
  .box-acc .bx-tag { font-weight: 400; font-family: var(--mono); font-size: 0.63rem; letter-spacing: 0.1em; text-transform: uppercase; color: var(--acc2); margin-bottom: 10px; }
  .box-acc.green .bx-tag { color: var(--render2); }
  .box-acc p { font-weight: 400; font-size: 0.88rem; color: var(--text); line-height: 1.82; }

  .box-yellow { font-weight: 400; background: rgba(201,151,10,0.09); border: 1px solid rgba(201,151,10,0.28); border-left: 3px solid #c9970a; border-radius: var(--r); padding: 14px 20px; font-size: 0.85rem; color: var(--text); line-height: 1.75; margin: 18px 0; }

  .req-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 18px; }
  .req-card { background: var(--bg2); border: 1px solid var(--border); border-radius: var(--r); padding: 18px 20px; }
  .req-card .rc-tag { font-weight: 400; font-family: var(--mono); font-size: 0.6rem; color: var(--acc2); letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 7px; display: block; }
  .req-card.green .rc-tag { color: var(--render2); }
  .req-card p { font-weight: 400; font-size: 0.85rem; color: var(--muted); line-height: 1.7; }
  .req-card strong { color: var(--text); font-weight: 500; }

  .pricing-table { width: 100%; border-collapse: collapse; border: 1px solid var(--border); border-radius: var(--r); overflow: hidden; margin-bottom: 16px; }
  .pricing-table thead tr { background: var(--bg3); }
  .pricing-table th { font-family: var(--mono); font-size: 0.6rem; letter-spacing: 0.1em; text-transform: uppercase; color: var(--muted); padding: 11px 17px; text-align: left; border-bottom: 1px solid var(--border); }
  .pricing-table td { font-weight: 400; padding: 14px 17px; font-size: 0.87rem; color: var(--muted); border-bottom: 1px solid var(--border); vertical-align: middle; }
  .pricing-table tr:last-child td { border-bottom: none; }
  .pricing-table tbody tr:hover td { background: var(--bg2); }
  .td-name { color: var(--text) !important; font-weight: 500; }
  .td-price { font-size: 1.25rem !important; font-weight: 600; color: #fff !important; letter-spacing: -0.02em; }
  .pricing-note { font-weight: 400; font-family: var(--mono); font-size: 0.68rem; color: var(--muted); line-height: 2; }

  .wf { display: grid; grid-template-columns: repeat(4, 1fr); border: 1px solid var(--border); border-radius: var(--r); overflow: hidden; margin-bottom: 8px; }
  .wf-s { background: var(--bg2); padding: 20px 16px; border-right: 1px solid var(--border); }
  .wf-s:last-child { border-right: none; }
  .wf-n { font-weight: 400; font-family: var(--mono); font-size: 0.58rem; color: var(--muted); letter-spacing: 0.1em; margin-bottom: 7px; display: block; }
  .wf-t { font-weight: 400; font-size: 0.83rem; font-weight: 500; color: #fff; margin-bottom: 6px; }
  .wf-d { font-weight: 400; font-size: 0.76rem; color: var(--muted); line-height: 1.6; }

  .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
  .fg { display: flex; flex-direction: column; gap: 7px; }
  .fg.full { grid-column: 1 / -1; }
  .fg label { font-weight: 400; font-family: var(--mono); font-size: 0.61rem; letter-spacing: 0.1em; text-transform: uppercase; color: var(--dim); }
  .fg label .req { color: var(--acc2); }
  .fg input[type="text"], .fg input[type="email"], .fg input[type="tel"], .fg textarea, .fg select { background: var(--bg2); border: 1px solid var(--border); border-radius: var(--r); color: var(--text); padding: 11px 14px; font-family: var(--font); font-size: 0.9rem; font-weight: 400; outline: none; width: 100%; transition: border-color 0.14s; }
  .fg select { cursor: pointer; }
  .fg select option { background: var(--bg2); }
  .fg input:focus, .fg textarea:focus, .fg select:focus { border-color: var(--border2); }
  .fg textarea { resize: vertical; min-height: 88px; }
  .fg input[type="file"] { background: var(--bg2); border: 1px dashed var(--border); border-radius: var(--r); color: var(--muted); padding: 22px 16px; font-family: var(--mono); font-size: 0.72rem; width: 100%; cursor: pointer; transition: border-color 0.14s; }
  .fg input[type="file"]::file-selector-button { background: var(--bg3); border: 1px solid var(--border2); border-radius: var(--r); color: var(--text); padding: 7px 14px; font-family: var(--mono); font-size: 0.68rem; letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; margin-right: 14px; }

  .zip-box { background: var(--bg3); border: 1px solid var(--border); border-radius: var(--r); padding: 16px 20px; margin-top: 10px; }
  .zip-box p { font-weight: 400; font-family: var(--mono); font-size: 0.7rem; color: var(--muted); line-height: 1.95; }
  .zip-box .zy { color: var(--acc2); }
  .zip-box .zt { color: var(--text); font-weight: 500; }

  .chk-row { display: flex; align-items: flex-start; gap: 12px; background: var(--bg2); border: 1px solid var(--border); border-radius: var(--r); padding: 15px 18px; margin-top: 12px; cursor: pointer; transition: border-color 0.14s; }
  .chk-row:hover { border-color: var(--border2); }
  .chk-row input[type="checkbox"] { appearance: none; -webkit-appearance: none; width: 17px; height: 17px; min-width: 17px; border: 1px solid var(--dim); background: transparent; border-radius: 2px; cursor: pointer; margin-top: 2px; position: relative; transition: background 0.14s, border-color 0.14s; }
  .chk-row input[type="checkbox"]:checked { background: var(--acc); border-color: var(--acc); }
  .chk-row input[type="checkbox"]:checked::after { content: '‚úì'; position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); color: #fff; font-size: 10px; font-weight: 700; line-height: 1; }
  .chk-row label { font-weight: 400; font-size: 0.85rem; color: var(--muted); line-height: 1.7; cursor: pointer; }
  .chk-row strong { color: var(--text); font-weight: 500; }

  .submit-area { margin-top: 24px; }
  .submit-row { display: flex; align-items: center; gap: 20px; margin-top: 18px; flex-wrap: wrap; }
  button[type="submit"] { background: var(--acc); color: #fff; border: 1px solid var(--acc); border-radius: var(--r); padding: 14px 32px; font-family: var(--font); font-size: 0.85rem; font-weight: 500; letter-spacing: 0.06em; text-transform: uppercase; cursor: pointer; transition: background 0.15s, color 0.15s; }
  button[type="submit"]:hover { background: transparent; color: var(--acc2); border-color: var(--acc2); }
  .submit-hint { font-weight: 400; font-family: var(--mono); font-size: 0.67rem; color: var(--muted); line-height: 1.9; }

  footer { position: relative; z-index: 1; border-top: 1px solid var(--border); padding: 28px 0; }
  .ft { max-width: 840px; margin: 0 auto; padding: 0 22px; display: grid; grid-template-columns: 1fr auto; gap: 20px; align-items: center; }
  .ft-info p { font-weight: 400; font-family: var(--mono); font-size: 0.75rem; color: var(--muted); line-height: 2.1; }
  .ft-info a { color: var(--text); text-decoration: none; }
  .ft-name { font-size: 0.95rem; font-weight: 600; color: #fff; margin-bottom: 6px; }
  .ft-right { font-weight: 400; font-family: var(--mono); font-size: 0.72rem; color: var(--muted); text-align: right; line-height: 2; }
  .ft-legal { font-weight: 400; max-width: 840px; margin: 14px auto 0; padding: 14px 22px 0; border-top: 1px solid var(--border); font-family: var(--mono); font-size: 0.68rem; color: var(--muted); line-height: 1.85; }

  @media (max-width: 680px) {
    .req-grid { grid-template-columns: 1fr; }
    .form-grid { grid-template-columns: 1fr; }
    .fg.full { grid-column: 1; }
    .ft { grid-template-columns: 1fr; }
    .ft-right { text-align: left; }
    .kpis { grid-template-columns: 1fr 1fr; }
    .wf { grid-template-columns: 1fr 1fr; }
    .wf-s:nth-child(2n) { border-right: none; }
    .tab-row { flex-direction: column; }
    .tab-btn { border-right: none; border-bottom: 1px solid var(--border); }
  }

  /* ‚îÄ‚îÄ OVERLAY ‚îÄ‚îÄ */
  #form-overlay { display:none; position:fixed; inset:0; z-index:999;
    background:rgba(10,12,18,0.96); backdrop-filter:blur(6px);
    align-items:center; justify-content:center;
    flex-direction:column; gap:28px; padding:32px; text-align:center; }
  #form-overlay.active { display:flex; }
  .ov-seal { font-family:var(--mono); font-size:0.6rem; letter-spacing:0.22em;
    text-transform:uppercase; color:var(--muted); border:1px solid var(--border2);
    padding:6px 18px; border-radius:2px; }
  .ov-spinner { width:44px; height:44px; border:2px solid var(--border2);
    border-top-color:var(--acc2); border-radius:50%; animation:spin 1.1s linear infinite; }
  @keyframes spin { to { transform:rotate(360deg); } }
  .ov-title { font-size:clamp(1rem,2.5vw,1.35rem); font-weight:500; color:#fff;
    letter-spacing:-0.02em; max-width:520px; line-height:1.5; }
  .ov-subtitle { font-family:var(--mono); font-size:0.72rem; color:var(--muted);
    max-width:440px; line-height:1.9; }
  .ov-progress-wrap { width:280px; height:2px; background:var(--border2); border-radius:2px; overflow:hidden; }
  .ov-progress-bar { height:100%; background:var(--acc2); width:0%;
    transition:width 0.5s ease; border-radius:2px; }
  .ov-check { width:54px; height:54px; border:2px solid #22c97a; border-radius:50%;
    display:flex; align-items:center; justify-content:center;
    font-size:1.5rem; color:#22c97a; animation:up 0.4s ease both; }
  .ov-date { font-family:var(--mono); font-size:0.6rem; letter-spacing:0.15em;
    color:var(--muted); border-top:1px solid var(--border); padding-top:18px;
    max-width:400px; line-height:1.9; }
  .ov-error-icon { width:54px; height:54px; border:2px solid #c0392b; border-radius:50%;
    display:flex; align-items:center; justify-content:center; font-size:1.5rem; color:#c0392b; }
  .ov-btn-back { background:transparent; color:var(--acc2); border:1px solid var(--acc2);
    border-radius:var(--r); padding:11px 28px; font-family:var(--mono); font-size:0.72rem;
    letter-spacing:0.1em; text-transform:uppercase; cursor:pointer;
    transition:background 0.16s; margin-top:8px; }
  .ov-btn-back:hover { background:var(--acc-s); }
  button[type="submit"]:disabled { opacity:0.45; cursor:not-allowed; }

  .zip-error { display:none; margin-top:8px; padding:10px 14px;
    background:rgba(192,57,43,0.10); border:1px solid rgba(192,57,43,0.35);
    border-left:3px solid #c0392b; border-radius:var(--r);
    font-family:var(--mono); font-size:0.72rem; color:#e07060; line-height:1.6; }

  /* ‚îÄ‚îÄ BIM CALCOLATORE ‚îÄ‚îÄ */
  .bim-calc-box {
    background: var(--bg2);
    border: 1px solid var(--border2);
    border-radius: var(--r);
    overflow: hidden;
  }
  .bim-calc-header {
    background: var(--bg3);
    border-bottom: 1px solid var(--border);
    padding: 10px 20px;
    font-family: var(--mono);
    font-size: 0.62rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--acc2);
  }
  .bim-calc-body { padding: 20px; display: flex; flex-direction: column; gap: 16px; }
  .bim-calc-field { display: flex; flex-direction: column; gap: 7px; }
  .bim-calc-field label {
    font-family: var(--mono);
    font-size: 0.61rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--dim);
  }
  .bim-calc-field select {
    background: var(--bg3);
    border: 1px solid var(--border2);
    border-radius: var(--r);
    color: var(--text);
    padding: 11px 14px;
    font-family: var(--font);
    font-size: 0.88rem;
    outline: none;
    cursor: pointer;
  }
  .bim-base-display {
    font-family: var(--mono);
    font-size: 0.8rem;
    color: var(--muted);
    padding: 11px 14px;
    background: var(--bg3);
    border: 1px solid var(--border);
    border-radius: var(--r);
  }
  .bim-stepper-btn {
    background: var(--bg3);
    border: 1px solid var(--border2);
    border-radius: var(--r);
    color: var(--acc2);
    width: 32px; height: 32px;
    font-size: 1.1rem;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: background 0.14s;
  }
  .bim-stepper-btn:hover { background: var(--acc-s); }
  .bim-result-box {
    background: var(--bg3);
    border: 1px solid var(--acc-b);
    border-left: 3px solid var(--acc);
    border-radius: var(--r);
    padding: 16px 18px 12px;
    animation: up 0.25s ease both;
  }
  .bim-result-righe { margin-bottom: 12px; }
  .bim-result-riga {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 5px 0;
    border-bottom: 1px solid var(--border);
    font-size: 0.83rem;
    color: var(--muted);
  }
  .bim-result-riga:last-child { border-bottom: none; }
  .bim-result-riga span:last-child { font-family: var(--mono); font-size: 0.8rem; color: var(--text); }
  .bim-result-totale-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0 4px;
    border-top: 1px solid var(--border2);
  }
  .bim-result-totale-label {
    font-family: var(--mono);
    font-size: 0.6rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--dim);
  }
  .bim-result-totale-val {
    font-size: 1.6rem;
    font-weight: 600;
    color: #fff;
    letter-spacing: -0.03em;
  }
  .bim-calc-note {
    font-family: var(--mono);
    font-size: 0.67rem;
    color: var(--dim);
    line-height: 1.8;
    padding: 10px 14px;
    background: rgba(0,0,0,0.15);
    border: 1px solid var(--border);
    border-radius: var(--r);
  }
  .bim-cta-btn {
    background: var(--acc);
    color: #fff;
    border: 1px solid var(--acc);
    border-radius: var(--r);
    padding: 12px 24px;
    font-family: var(--font);
    font-size: 0.82rem;
    font-weight: 500;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    cursor: pointer;
    transition: background 0.16s, color 0.16s;
  }
  .bim-cta-btn:hover { background: transparent; color: var(--acc2); border-color: var(--acc2); }

</style>
</head>
<body>

<canvas id="bg-canvas"></canvas>

<header>
  <div class="hdr">
    <div>
      <div class="hdr-name">Geom. Pegoraro Alex</div>
      <div class="hdr-sub">Servizi Tecnici Grafici</div>
    </div>
    <a href="index.html" class="hdr-back">‚Üê Tutti i Servizi</a>
  </div>
</header>

<!-- HERO -->
<div class="hero">
  <div class="wrap">
    <div class="hero-eye">Servizio 02</div>
    <h1><span class="ca">DWG</span> ‚Üí <span class="ca2">BIM & Rendering</span></h1>
    <p class="hero-desc">Da un elaborato DWG esistente, restituisco un modello BIM parametrico (Revit/IFC) oppure render fotorealistici in alta risoluzione. Due percorsi distinti, un unico punto di partenza.</p>
    <a href="#commissione" class="btn">Invia Commissione ‚Üí</a>

    <div class="kpis">
      <div class="kpi"><div class="kpi-v">48h</div><div class="kpi-l">Preventivo</div></div>
      <div class="kpi"><div class="kpi-v">IFC</div><div class="kpi-l">Standard aperto</div></div>
      <div class="kpi"><div class="kpi-v">4K</div><div class="kpi-l">Risoluzione render</div></div>
    </div>
  </div>
</div>

<!-- ¬ß 01 COSA OFFRO -->
<div class="sec">
  <div class="wrap">
    <div class="label-tag">¬ß 01 ‚Äî Descrizione Servizio</div>
    <h2>Tre Percorsi, una Scelta</h2>

    <div class="tab-row" id="tab-row">
      <button class="tab-btn active-render" onclick="switchTab('render')" id="tab-render">üé® Solo Rendering (PDF)</button>
      <button class="tab-btn" onclick="switchTab('bim')" id="tab-bim">üèó Modello BIM (File nativo + IFC)</button>
      <button class="tab-btn" onclick="switchTab('combo')" id="tab-combo">‚ú¶ BIM + Rendering (Combinato)</button>
    </div>

    <!-- RENDER PANEL -->
    <div class="plan-panel active" id="panel-render">
      <div class="box-acc green">
        <div class="bx-tag">Percorso A ‚Äî Rendering Fotorealistico</div>
        <p>Elaboro il tuo file DWG o modello 3D (OBJ, SKP, 3DS) e restituisco render fotorealistici in alta risoluzione. Consegna in PDF ad alta qualit√†, non vettorializzato. Ideale per presentazioni al cliente, conferenze di servizi o documentazione di progetto.</p>
      </div>
      <div class="req-grid">
        <div class="req-card green"><span class="rc-tag">Input accettato</span><p><strong>DWG / OBJ / SKP / 3DS</strong><br>+ file .TXT specifiche finiture e materiali (opzionale)</p></div>
        <div class="req-card green"><span class="rc-tag">Output consegnato</span><p><strong>PDF alta risoluzione</strong> (fino a 4K)<br>Formato A3/A2 o dimensione concordata</p></div>
      </div>
      <div class="box-yellow">‚ö† In assenza del file specifiche verr√† applicata una palette di finiture neutra standard. Il render √® un elaborato grafico e non costituisce progetto esecutivo.</div>
    </div>

    <!-- BIM PANEL -->
    <div class="plan-panel" id="panel-bim">
      <div class="box-acc">
        <div class="bx-tag">Percorso B ‚Äî Modello BIM Parametrico</div>
        <p>Traspongo i tuoi elaborati DWG in un modello BIM tridimensionale parametrico. Consegna del file nativo (Revit RVT o ArchiCAD PLN) + esportazione IFC per interoperabilit√† con qualsiasi software. Specifiche LOD su richiesta.</p>
      </div>
      <div class="req-grid">
        <div class="req-card"><span class="rc-tag">Input accettato</span><p><strong>DWG</strong> ‚Äî piante per livello, prospetti, sezioni<br>+ specifiche_bim.txt (LOD, software target, disciplina)</p></div>
        <div class="req-card"><span class="rc-tag">Output consegnato</span><p><strong>File nativo</strong> (RVT / PLN)<br><strong>+ IFC</strong> standard aperto<br>Coordinato per disciplina</p></div>
      </div>
      <div class="box-yellow">‚ö† Il modello BIM √® un elaborato di supporto grafico. La validazione tecnica e la firma degli elaborati rimangono in capo al professionista responsabile del progetto.</div>
    </div>

  </div>
</div>

<!-- ¬ß 02 PREZZIARIO -->
<div class="sec">
  <div class="wrap">
    <div class="label-tag">¬ß 02 ‚Äî Prezziario</div>
    <h2>Tariffe</h2>

    <!-- Rendering pricing -->
    <div id="pricing-render">
      <p style="font-size:0.88rem; color:var(--muted); margin-bottom:18px; line-height:1.8;">Prezzi per <strong style="color:var(--text)">rendering fotorealistici</strong> ‚Äî consegna in PDF alta risoluzione. Il numero di viste concordato prima della lavorazione.</p>
      <table class="pricing-table">
        <thead><tr><th>Pacchetto</th><th>Contenuto</th><th>Prezzo</th><th>Tempi</th></tr></thead>
        <tbody>
          <tr><td class="td-name">Vista Singola</td><td>1 render fotorealistico, 1 punto di vista</td><td><span class="td-price">80‚Ç¨</span></td><td>48h dal saldo</td></tr>
          <tr><td class="td-name">Pacchetto Base</td><td>3 render, punti di vista concordati</td><td><span class="td-price">210‚Ç¨</span></td><td>72h dal saldo</td></tr>
          <tr><td class="td-name">Pacchetto Avanzato</td><td>6 render + 1 revisione inclusa</td><td><span class="td-price">380‚Ç¨</span></td><td>5 gg lavorativi</td></tr>
          <tr><td class="td-name">Pacchetto Completo</td><td>10 render + 2 revisioni incluse</td><td><span class="td-price">580‚Ç¨</span></td><td>8 gg lavorativi</td></tr>
          <tr><td class="td-name">Revisione Post-Consegna</td><td>Modifica luci, materiali o punto di vista</td><td><span class="td-price">35‚Ç¨</span></td><td>24h dal saldo</td></tr>
          <tr><td class="td-name">Urgenza (+50%)</td><td>Dimezzamento tempi di consegna</td><td><span class="td-price">+50%</span></td><td>‚Äî</td></tr>
        </tbody>
      </table>
    </div>

    <!-- BIM pricing -->
    <div id="pricing-bim" style="display:none;">
      <p style="font-size:0.88rem; color:var(--muted); margin-bottom:18px; line-height:1.8;">Prezzi per <strong style="color:var(--text)">modello BIM</strong> ‚Äî file nativo + IFC. Complessit√† valutata su numero di piani, disciplina e LOD richiesto.</p>
      <table class="pricing-table">
        <thead><tr><th>Pacchetto</th><th>Contenuto</th><th>Prezzo base</th><th>Tempi</th></tr></thead>
        <tbody>
          <tr><td class="td-name">Monopiano Semplice</td><td>Singolo piano, LOD 200, architettonico</td><td><span class="td-price">180‚Ç¨</span></td><td>5 gg lavorativi</td></tr>
          <tr><td class="td-name">Monopiano Completo</td><td>Singolo piano, LOD 300 + IFC</td><td><span class="td-price">280‚Ç¨</span></td><td>7 gg lavorativi</td></tr>
          <tr><td class="td-name">Edificio Multipiano</td><td>2‚Äì4 piani, LOD 300 + IFC</td><td><span class="td-price">480‚Ç¨</span></td><td>Preventivo</td></tr>
          <tr><td class="td-name">Piano Aggiuntivo</td><td>Ogni livello oltre il primo</td><td><span class="td-price">+90‚Ç¨</span></td><td>+24h</td></tr>
          <tr><td class="td-name">Disciplina Aggiuntiva</td><td>Strutturale o Impiantistico (MEP)</td><td><span class="td-price">+120‚Ç¨</span></td><td>+48h</td></tr>
          <tr><td class="td-name">Revisione Post-Consegna</td><td>Modifica elementi o aggiunta parametri</td><td><span class="td-price">35‚Ç¨</span></td><td>24h dal saldo</td></tr>
        </tbody>
      </table>
    </div>

    <!-- COMBO pricing -->
    <div id="pricing-combo" style="display:none;">
      <p style="font-size:0.88rem; color:var(--muted); margin-bottom:18px; line-height:1.8;">Prezzi per <strong style="color:var(--text)">BIM + Rendering combinato</strong> ‚Äî modello BIM completo (file nativo + IFC) con render fotorealistici inclusi. Sconto applicato rispetto all'acquisto separato.</p>
      <table class="pricing-table">
        <thead><tr><th>Pacchetto</th><th>Contenuto</th><th>Prezzo</th><th>Tempi</th></tr></thead>
        <tbody>
          <tr><td class="td-name">Combo Essenziale</td><td>Monopiano LOD 200 + 1 render</td><td><span class="td-price">230‚Ç¨</span></td><td>7 gg lavorativi</td></tr>
          <tr><td class="td-name">Combo Standard</td><td>Monopiano LOD 300 + IFC + 3 render</td><td><span class="td-price">430‚Ç¨</span></td><td>10 gg lavorativi</td></tr>
          <tr><td class="td-name">Combo Avanzato</td><td>Monopiano LOD 300 + IFC + 6 render + 1 revisione</td><td><span class="td-price">620‚Ç¨</span></td><td>12 gg lavorativi</td></tr>
          <tr><td class="td-name">Combo Multipiano</td><td>2‚Äì4 piani LOD 300 + IFC + 6 render</td><td><span class="td-price">880‚Ç¨</span></td><td>Preventivo</td></tr>
          <tr><td class="td-name">Piano Aggiuntivo</td><td>Ogni livello oltre il primo</td><td><span class="td-price">+90‚Ç¨</span></td><td>+24h</td></tr>
          <tr><td class="td-name">Render Aggiuntivo</td><td>Oltre quelli inclusi nel pacchetto</td><td><span class="td-price">+65‚Ç¨</span></td><td>+24h cad.</td></tr>
          <tr><td class="td-name">Revisione Post-Consegna</td><td>BIM o render</td><td><span class="td-price">35‚Ç¨</span></td><td>24h dal saldo</td></tr>
        </tbody>
      </table>
    </div>

    <p class="pricing-note">
      Preventivo personalizzato per edifici complessi o modellazione multidisciplinare &nbsp;¬∑&nbsp; Prezzi non soggetti a IVA (regime forfettario)<br>
      Contributo integrativo CIPAG 5% + imposta di bollo ‚Ç¨2,00 applicati in fattura ¬∑ Pagamento: Bonifico bancario ¬∑ PayPal
    </p>

    <!-- ‚îÄ‚îÄ CALCOLATORE INTERATTIVO ‚îÄ‚îÄ -->
    <div style="margin-top:32px;" id="bim-calc-wrap">
      <h2 style="margin-bottom:8px;">Calcola il tuo Preventivo</h2>
      <p style="font-size:0.88rem; color:var(--muted); margin-bottom:22px; line-height:1.8;">Seleziona un pacchetto dalla tab qui sopra, poi scegli le opzioni aggiuntive. Il preventivo si aggiorna in tempo reale.</p>

      <div class="bim-calc-box">
        <div class="bim-calc-header">// Configuratore Preventivo Interattivo</div>
        <div class="bim-calc-body">

          <!-- Selezione pacchetto base da tab -->
          <div class="bim-calc-field">
            <label>Pacchetto base selezionato</label>
            <div class="bim-base-display" id="bim-base-display">‚Üê Seleziona una tab sopra (Rendering, BIM o Combinato)</div>
          </div>

          <!-- Sub-selezione pacchetti -->
          <div class="bim-calc-field" id="bim-sub-wrap" style="display:none;">
            <label id="bim-sub-label">Pacchetto</label>
            <select id="bim-sub-select" onchange="calcolaBim()">
              <option value="">‚Äî Seleziona ‚Äî</option>
            </select>
          </div>

          <!-- Extra: piani aggiuntivi (BIM / Combo) -->
          <div class="bim-calc-field" id="bim-extra-piani-wrap" style="display:none;">
            <label>Piani aggiuntivi (oltre il primo)</label>
            <div style="display:flex; align-items:center; gap:12px;">
              <button type="button" class="bim-stepper-btn" onclick="cambiaStepperBim('piani',-1)">‚àí</button>
              <span id="bim-piani-val" style="font-family:var(--mono);font-size:1rem;color:#fff;min-width:24px;text-align:center;">0</span>
              <button type="button" class="bim-stepper-btn" onclick="cambiaStepperBim('piani',1)">+</button>
              <span style="font-family:var(--mono);font-size:0.72rem;color:var(--muted);">√ó +90 ‚Ç¨ / piano</span>
            </div>
          </div>

          <!-- Extra: discipline aggiuntive (BIM / Combo) -->
          <div class="bim-calc-field" id="bim-extra-disc-wrap" style="display:none;">
            <label>Discipline aggiuntive (strutturale / MEP)</label>
            <div style="display:flex; align-items:center; gap:12px;">
              <button type="button" class="bim-stepper-btn" onclick="cambiaStepperBim('disc',-1)">‚àí</button>
              <span id="bim-disc-val" style="font-family:var(--mono);font-size:1rem;color:#fff;min-width:24px;text-align:center;">0</span>
              <button type="button" class="bim-stepper-btn" onclick="cambiaStepperBim('disc',1)">+</button>
              <span style="font-family:var(--mono);font-size:0.72rem;color:var(--muted);">√ó +120 ‚Ç¨ / disciplina</span>
            </div>
          </div>

          <!-- Extra: render aggiuntivi (Combo) -->
          <div class="bim-calc-field" id="bim-extra-render-wrap" style="display:none;">
            <label>Render aggiuntivi (oltre quelli inclusi)</label>
            <div style="display:flex; align-items:center; gap:12px;">
              <button type="button" class="bim-stepper-btn" onclick="cambiaStepperBim('render',-1)">‚àí</button>
              <span id="bim-render-val" style="font-family:var(--mono);font-size:1rem;color:#fff;min-width:24px;text-align:center;">0</span>
              <button type="button" class="bim-stepper-btn" onclick="cambiaStepperBim('render',1)">+</button>
              <span style="font-family:var(--mono);font-size:0.72rem;color:var(--muted);">√ó +65 ‚Ç¨ / render</span>
            </div>
          </div>

          <!-- Urgenza -->
          <div class="bim-calc-field">
            <div style="display:flex; align-items:center; gap:12px;">
              <input type="checkbox" id="bim-urgenza" onchange="calcolaBim()" style="width:16px;height:16px;accent-color:var(--acc2);cursor:pointer;">
              <label for="bim-urgenza" style="font-size:0.86rem; color:var(--muted); cursor:pointer; margin-bottom:0;">Urgenza (+50% sul prezzo base) ‚Äî dimezzamento dei tempi di consegna</label>
            </div>
          </div>

          <!-- Risultato -->
          <div class="bim-result-box" id="bim-result-box" style="display:none;">
            <div class="bim-result-righe" id="bim-result-righe"></div>
            <div class="bim-result-totale-row">
              <span class="bim-result-totale-label">TOTALE DA CORRISPONDERE</span>
              <span class="bim-result-totale-val" id="bim-result-totale">‚Äî</span>
            </div>
          </div>
          <div class="bim-calc-note" id="bim-calc-note" style="display:none;">‚Ñπ Importo comprensivo di imposta di bollo ‚Ç¨2,00 e contributo integrativo CIPAG 5%. Per edifici multipiano complessi e preventivi personalizzati, il prezzo definitivo viene concordato dopo ricezione degli elaborati.</div>

          <div style="margin-top:18px; display:none;" id="bim-cta-row">
            <button type="button" class="bim-cta-btn" onclick="usaPreventivoBim()">Usa questo preventivo nella richiesta ‚Üí</button>
          </div>

        </div>
      </div>
    </div>

    <input type="hidden" id="bim-preventivo-totale" name="preventivo_totale" value="">
    <input type="hidden" id="bim-preventivo-dettaglio" name="preventivo_dettaglio" value="">

  </div>
</div>

<!-- ¬ß 03 REQUISITI -->
<div class="sec">
  <div class="wrap">
    <div class="label-tag">¬ß 03 ‚Äî Requisiti</div>
    <h2>Cosa Fornire</h2>
    <div class="req-grid">
      <div class="req-card"><span class="rc-tag">File tecnico</span><p>File <strong>DWG</strong> con piante, prospetti e sezioni ‚Äî oppure modello 3D (<strong>OBJ / SKP / 3DS</strong>) per il percorso rendering.</p></div>
      <div class="req-card"><span class="rc-tag">Specifiche</span><p>File <strong>.TXT</strong> con: LOD richiesto, software di destinazione, disciplina, materiali/finiture (per rendering), eventuali urgenze.</p></div>
      <div class="req-card"><span class="rc-tag">Formato invio</span><p>Tutti i file compressi in un unico <strong>.ZIP</strong> allegato al form di commissione.</p></div>
      <div class="req-card"><span class="rc-tag">Note aggiuntive</span><p>Maggiore completezza degli elaborati = maggiore fedelt√† del risultato. Per edifici storici allegare anche rilievi esistenti.</p></div>
    </div>
  </div>
</div>

<!-- ¬ß 04 WORKFLOW -->
<div class="sec">
  <div class="wrap">
    <div class="label-tag">¬ß 04 ‚Äî Come Funziona</div>
    <h2>Processo in 4 Passi</h2>
    <div class="wf">
      <div class="wf-s"><span class="wf-n">STEP 01</span><div class="wf-t">Invio Commissione</div><div class="wf-d">Compila il form, seleziona il percorso (Rendering o BIM) e allega il file ZIP.</div></div>
      <div class="wf-s"><span class="wf-n">STEP 02</span><div class="wf-t">Preventivo via Mail</div><div class="wf-d">Ricevi il preventivo definitivo entro 48h con valutazione della complessit√†.</div></div>
      <div class="wf-s"><span class="wf-n">STEP 03</span><div class="wf-t">Saldo</div><div class="wf-d">Il timer di lavorazione parte dalla conferma del pagamento ricevuto.</div></div>
      <div class="wf-s"><span class="wf-n">STEP 04</span><div class="wf-t">Consegna</div><div class="wf-d">Rendering in PDF alta risoluzione oppure file BIM nativo + IFC via mail nei tempi concordati.</div></div>
    </div>
  </div>
</div>

<!-- ¬ß 05 FORM -->
<div class="sec" id="commissione">
  <div class="wrap">
    <div class="label-tag">¬ß 05 ‚Äî Modulo di Commissione</div>
    <h2>Invia la tua Commessa</h2>

    <form id="commessa-form">
      <div class="form-grid">
        <div class="fg">
          <label for="nome">Nome <span class="req">*</span></label>
          <input type="text" id="nome" name="nome" required placeholder="Nome" autocomplete="given-name">
        </div>
        <div class="fg">
          <label for="cognome">Cognome <span class="req">*</span></label>
          <input type="text" id="cognome" name="cognome" required placeholder="Cognome" autocomplete="family-name">
        </div>
        <div class="fg">
          <label for="telefono">Telefono <span class="req">*</span></label>
          <input type="tel" id="telefono" name="telefono" required placeholder="Telefono" autocomplete="tel">
        </div>
        <div class="fg">
          <label for="email">Email <span class="req">*</span></label>
          <input type="email" id="email" name="email" required placeholder="Email" autocomplete="email">
        </div>
        <div class="fg full">
          <label for="cf-piva">Codice Fiscale / Partita IVA <span class="req">*</span></label>
          <input type="text" id="cf-piva" name="cf_piva" required placeholder="Codice Fiscale o Partita IVA" autocomplete="off">
        </div>
        <div class="fg full">
          <label for="indirizzo-fatt">Indirizzo di Fatturazione <span class="req">*</span></label>
          <input type="text" id="indirizzo-fatt" name="indirizzo_fatturazione" required placeholder="Indirizzo di fatturazione" autocomplete="street-address">
        </div>
        <div class="fg full">
          <label for="pec">PEC <span style="color:var(--muted);font-weight:300;">(opzionale)</span></label>
          <input type="email" id="pec" name="pec" placeholder="PEC">
        </div>
        <div class="fg full">
          <label for="percorso">Percorso richiesto <span class="req">*</span></label>
          <select id="percorso" name="percorso" required>
            <option value="">‚Äî Seleziona ‚Äî</option>
            <option value="rendering">Percorso A ‚Äî Solo Rendering (PDF)</option>
            <option value="bim">Percorso B ‚Äî Modello BIM (file nativo + IFC)</option>
            <option value="bim+rendering">Percorso C ‚Äî BIM + Rendering (pacchetto combinato)</option>
          </select>
        </div>
        <div class="fg full">
          <label for="note">Note e Specifiche</label>
          <textarea id="note" name="note" placeholder="Numero di viste / LOD richiesto, software di destinazione (Revit / ArchiCAD), disciplina, numero di piani, finiture, eventuali urgenze‚Ä¶"></textarea>
        </div>
        <div class="fg full">
          <label for="file-allegato">File ZIP <span class="req">*</span></label>
          <input type="file" id="file-allegato" name="attachment" accept=".zip" required />
          <div class="zip-error" id="zip-error">‚ö† Il file selezionato non √® un archivio .ZIP. Comprimi i tuoi file in un .zip e ricarica.</div>
          <div class="zip-box">
            <p>
              <span class="zy">‚ñ∏ Percorso A ‚Äî Rendering:</span><br>
              ‚Äî <span class="zt">modello.dwg</span> (o .obj / .3ds / .skp)<br>
              ‚Äî <span class="zt">finiture.txt</span> ‚Äî specifiche materiali<br><br>
              <span class="zy">‚ñ∏ Percorso B ‚Äî BIM:</span><br>
              ‚Äî <span class="zt">pianta_piano_X.dwg</span> per ogni livello<br>
              ‚Äî <span class="zt">prospetti.dwg</span> e sezioni (se disponibili)<br>
              ‚Äî <span class="zt">specifiche_bim.txt</span> ‚Äî LOD, software, disciplina<br><br>
              <span style="color:var(--dim)">Maggiore completezza = risultato pi√π fedele.</span>
            </p>
          </div>
        </div>
      </div>

      <div class="submit-area">
        <div class="chk-row">
          <input type="checkbox" id="chk1" name="accetto-disclaimer" value="si" required>
          <label for="chk1">Dichiaro di aver compreso che questo √® un <strong>servizio di supporto grafico tecnico</strong> e <strong>non una consulenza professionale asseverata</strong>. Il sottoscritto rimane il solo responsabile dell'utilizzo degli elaborati prodotti.</label>
        </div>
        <div class="chk-row">
          <input type="checkbox" id="chk2" name="accetto-privacy" value="si" required>
          <label for="chk2">Acconsento al trattamento dei dati personali forniti ai fini della gestione della presente commissione, ai sensi del GDPR 2016/679 e del D.Lgs. 196/2003.</label>
        </div>
        <div class="submit-row">
          <button type="submit" id="submit-btn">Invia Commissione ‚Üí</button>
          <div class="submit-hint">
            Riceverai il preventivo entro 48h via mail.<br>
            Consegna entro i tempi concordati dal saldo ricevuto.
          </div>
        </div>
      </div>
    </form>
  </div>
</div>


<div id="form-overlay">
  <div id="ov-loading">
    <div class="ov-seal">Trasmissione Sicura</div>
    <div class="ov-spinner"></div>
    <div class="ov-title">Invio commessa in corso‚Ä¶<br>Non chiudere la pagina.</div>
    <div class="ov-progress-wrap"><div class="ov-progress-bar" id="ov-bar"></div></div>
    <div class="ov-subtitle" id="ov-loading-detail">Preparazione pacchetto documentale‚Ä¶</div>
  </div>
  <div id="ov-success" style="display:none;flex-direction:column;align-items:center;gap:24px;">
    <div class="ov-seal">Commissione Ricevuta</div>
    <div class="ov-check">‚úì</div>
    <div class="ov-title">Commessa acquisita correttamente.</div>
    <div class="ov-subtitle">Riceverai conferma e preventivo all'indirizzo e-mail indicato entro <strong style="color:#dde4f0">48 ore lavorative</strong>.</div>
    <div class="ov-date" id="ov-protocol">Ref.: ‚Äî<br>Data: ‚Äî</div>
  </div>
  <div id="ov-error" style="display:none;flex-direction:column;align-items:center;gap:20px;">
    <div class="ov-seal">Trasmissione Interrotta</div>
    <div class="ov-error-icon">‚úï</div>
    <div class="ov-title">Errore durante l'invio.</div>
    <div class="ov-subtitle" id="ov-error-detail">Verificare la connessione e riprovare.</div>
    <button class="ov-btn-back" onclick="closeOverlay()">‚Üê Torna al Modulo</button>
  </div>
</div>

<footer>
  <div class="ft">
    <div class="ft-info">
      <div class="ft-name">Geom. Pegoraro Alex</div>
      <p>Email: <a href="mailto:pegoraroalexgeom@gmail.com">pegoraroalexgeom@gmail.com</a></p>
      <p>PEC: <a href="mailto:alex.pegoraro@geopec.it">alex.pegoraro@geopec.it</a></p>
      <p>P.IVA: 04505080244</p>
    </div>
    <div class="ft-right">
      <div>¬© 2025 Geom. Pegoraro Alex</div>
      <div>DWG ‚Üí BIM & Rendering</div>
    </div>
  </div>
  <div class="ft-legal">
    Il presente sito non costituisce consulenza professionale asseverata. I servizi offerti sono di esclusivo supporto grafico tecnico alla progettazione. P.IVA 04505080244.
  </div>
</footer>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
  // ‚îÄ‚îÄ DATI PACCHETTI ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const BIM_PACCHETTI = {
    render: [
      { label: 'Vista Singola ‚Äî 1 render, 1 punto di vista', base: 80 },
      { label: 'Pacchetto Base ‚Äî 3 render, punti di vista concordati', base: 210 },
      { label: 'Pacchetto Avanzato ‚Äî 6 render + 1 revisione inclusa', base: 380 },
      { label: 'Pacchetto Completo ‚Äî 10 render + 2 revisioni incluse', base: 580 },
    ],
    bim: [
      { label: 'Monopiano Semplice ‚Äî LOD 200, architettonico', base: 180 },
      { label: 'Monopiano Completo ‚Äî LOD 300 + IFC', base: 280 },
      { label: 'Edificio Multipiano ‚Äî 2‚Äì4 piani, LOD 300 + IFC', base: 480 },
    ],
    combo: [
      { label: 'Combo Essenziale ‚Äî Monopiano LOD 200 + 1 render', base: 230 },
      { label: 'Combo Standard ‚Äî Monopiano LOD 300 + IFC + 3 render', base: 430 },
      { label: 'Combo Avanzato ‚Äî Monopiano LOD 300 + IFC + 6 render + 1 revisione', base: 620 },
      { label: 'Combo Multipiano ‚Äî 2‚Äì4 piani LOD 300 + IFC + 6 render', base: 880 },
    ],
  };
  const BOLLO = 2.00;
  const CIPAG = 0.05;
  let bimTab = 'render';
  let bimPiani = 0, bimDisc = 0, bimRender = 0;

  function fmtBim(n) { return n.toLocaleString('it-IT', {minimumFractionDigits:2, maximumFractionDigits:2, useGrouping:true}) + ' ‚Ç¨'; }

  function switchTab(tab) {
    const tabRender = document.getElementById('tab-render');
    const tabBim    = document.getElementById('tab-bim');
    const panelR    = document.getElementById('panel-render');
    const panelB    = document.getElementById('panel-bim');
    const priceR    = document.getElementById('pricing-render');
    const priceB    = document.getElementById('pricing-bim');

    const tabCombo  = document.getElementById('tab-combo');
    const panelC    = document.getElementById('panel-combo') || null;
    const priceC    = document.getElementById('pricing-combo');
    if (tab === 'render') {
      tabRender.className = 'tab-btn active-render';
      tabBim.className    = 'tab-btn';
      if(tabCombo) tabCombo.className = 'tab-btn';
      panelR.classList.add('active'); panelB.classList.remove('active');
      priceR.style.display = ''; priceB.style.display = 'none'; if(priceC) priceC.style.display = 'none';
    } else if (tab === 'bim') {
      tabBim.className    = 'tab-btn active-bim';
      tabRender.className = 'tab-btn';
      if(tabCombo) tabCombo.className = 'tab-btn';
      panelB.classList.add('active'); panelR.classList.remove('active');
      priceR.style.display = 'none'; priceB.style.display = ''; if(priceC) priceC.style.display = 'none';
    } else {
      if(tabCombo) tabCombo.className = 'tab-btn active-bim';
      tabRender.className = 'tab-btn'; tabBim.className = 'tab-btn';
      panelR.classList.remove('active'); panelB.classList.remove('active');
      priceR.style.display = 'none'; priceB.style.display = 'none'; if(priceC) priceC.style.display = '';
    }

    // Update calculator
    bimTab = tab;
    bimPiani = 0; bimDisc = 0; bimRender = 0;
    aggiornaCalcBim();
  }

  function aggiornaCalcBim() {
    const labels = { render: 'Solo Rendering (PDF)', bim: 'Modello BIM (File nativo + IFC)', combo: 'BIM + Rendering Combinato' };
    document.getElementById('bim-base-display').textContent = '‚úì ' + labels[bimTab];

    // Popola sub-select
    const sub = document.getElementById('bim-sub-select');
    const pkgs = BIM_PACCHETTI[bimTab];
    sub.innerHTML = '<option value="">‚Äî Seleziona pacchetto ‚Äî</option>';
    pkgs.forEach((p, i) => {
      const opt = document.createElement('option');
      opt.value = i;
      opt.textContent = p.label + ' ‚Äî ' + fmtBim(p.base);
      sub.appendChild(opt);
    });
    sub.value = '';
    document.getElementById('bim-sub-wrap').style.display = 'block';
    document.getElementById('bim-sub-label').textContent = 'Pacchetto ' + labels[bimTab];

    // Extra options visibility
    const hasPiani = bimTab === 'bim' || bimTab === 'combo';
    const hasDisc  = bimTab === 'bim' || bimTab === 'combo';
    const hasRend  = bimTab === 'combo';
    document.getElementById('bim-extra-piani-wrap').style.display = hasPiani ? 'block' : 'none';
    document.getElementById('bim-extra-disc-wrap').style.display  = hasDisc  ? 'block' : 'none';
    document.getElementById('bim-extra-render-wrap').style.display = hasRend  ? 'block' : 'none';

    document.getElementById('bim-piani-val').textContent  = bimPiani;
    document.getElementById('bim-disc-val').textContent   = bimDisc;
    document.getElementById('bim-render-val').textContent = bimRender;

    document.getElementById('bim-result-box').style.display = 'none';
    document.getElementById('bim-calc-note').style.display  = 'none';
    document.getElementById('bim-cta-row').style.display    = 'none';
  }

  function cambiaStepperBim(tipo, delta) {
    if (tipo === 'piani')  { bimPiani  = Math.max(0, bimPiani  + delta); document.getElementById('bim-piani-val').textContent  = bimPiani; }
    if (tipo === 'disc')   { bimDisc   = Math.max(0, bimDisc   + delta); document.getElementById('bim-disc-val').textContent   = bimDisc; }
    if (tipo === 'render') { bimRender = Math.max(0, bimRender + delta); document.getElementById('bim-render-val').textContent = bimRender; }
    calcolaBim();
  }

  function calcolaBim() {
    const sub = document.getElementById('bim-sub-select');
    if (sub.value === '') {
      document.getElementById('bim-result-box').style.display = 'none';
      document.getElementById('bim-calc-note').style.display  = 'none';
      document.getElementById('bim-cta-row').style.display    = 'none';
      return;
    }
    const pkg = BIM_PACCHETTI[bimTab][parseInt(sub.value)];
    const urgenza = document.getElementById('bim-urgenza').checked;

    let prezzoBase = pkg.base;
    if (urgenza) prezzoBase = Math.round(prezzoBase * 1.5);
    const extraPiani  = bimPiani  * 90;
    const extraDisc   = bimDisc   * 120;
    const extraRender = bimRender * 65;
    const subtotale = prezzoBase + extraPiani + extraDisc + extraRender;
    const conBollo  = subtotale + BOLLO;
    const cipag     = conBollo * CIPAG;
    const totale    = conBollo + cipag;

    const righe = [];
    righe.push({ l: pkg.label + (urgenza ? ' (urgenza +50%)' : ''), v: fmtBim(prezzoBase) });
    if (extraPiani  > 0) righe.push({ l: `${bimPiani} piani aggiuntivi √ó 90‚Ç¨`, v: fmtBim(extraPiani) });
    if (extraDisc   > 0) righe.push({ l: `${bimDisc} discipline aggiuntive √ó 120‚Ç¨`, v: fmtBim(extraDisc) });
    if (extraRender > 0) righe.push({ l: `${bimRender} render aggiuntivi √ó 65‚Ç¨`, v: fmtBim(extraRender) });
    righe.push({ l: 'Imposta di bollo (art. 13 DPR 642/72)', v: fmtBim(BOLLO) });
    righe.push({ l: 'Contributo integrativo CIPAG (5%)', v: fmtBim(cipag) });

    document.getElementById('bim-result-righe').innerHTML =
      righe.map(r => `<div class="bim-result-riga"><span>${r.l}</span><span>${r.v}</span></div>`).join('');
    document.getElementById('bim-result-totale').textContent = fmtBim(totale);
    document.getElementById('bim-result-box').style.display = 'block';
    document.getElementById('bim-calc-note').style.display  = 'block';
    document.getElementById('bim-cta-row').style.display    = 'block';

    // Salva nei hidden
    const det = righe.map(r => r.l + ': ' + r.v).join(' | ') + ' | TOTALE: ' + fmtBim(totale);
    document.getElementById('bim-preventivo-totale').value = fmtBim(totale);
    document.getElementById('bim-preventivo-dettaglio').value = det;
  }

  function usaPreventivoBim() {
    document.getElementById('commissione').scrollIntoView({ behavior: 'smooth', block: 'start' });
    // Pre-seleziona il percorso nel form
    const mapPercorso = { render: 'rendering', bim: 'bim', combo: 'bim+rendering' };
    const selPercorso = document.getElementById('percorso');
    if (selPercorso) selPercorso.value = mapPercorso[bimTab];
  }
</script>




<script>
(function() {
  const canvas = document.getElementById('bg-canvas');
  const ctx = canvas.getContext('2d');

  const PALETTE = ["26,95,168","58,155,212","100,180,240","40,120,200"];

  let W, H, nodes, hubs, t = 0;

  function resize() {
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
    build();
  }

  function rand(a, b) { return a + Math.random() * (b - a); }
  function pick() { return PALETTE[Math.floor(Math.random() * PALETTE.length)]; }

  function build() {
    // 3 layers of nodes at different speeds (parallax depth)
    nodes = [];
    const layers = [
      { count: 18, speed: 0.12, rMin: 0.5, rMax: 1.2, alpha: 0.35 },
      { count: 28, speed: 0.26, rMin: 0.8, rMax: 2.0, alpha: 0.50 },
      { count: 14, speed: 0.48, rMin: 1.2, rMax: 3.2, alpha: 0.65 },
    ];
    for (const l of layers) {
      for (let i = 0; i < l.count; i++) {
        const baseR = rand(l.rMin, l.rMax);
        nodes.push({
          x: rand(0, W), y: rand(0, H),
          vx: (Math.random()-0.5)*l.speed,
          vy: (Math.random()-0.5)*l.speed,
          r: baseR,
          baseR,
          pulseSpeed: rand(0.008, 0.022),
          pulsePhase: rand(0, Math.PI*2),
          alpha: l.alpha,
          col: pick(),
          layer: l.speed,
          isHub: false,
        });
      }
    }

    // 4‚Äì5 "hub" nodes: larger, slower, with glow rings
    hubs = [];
    for (let i = 0; i < 5; i++) {
      hubs.push({
        x: rand(W*0.1, W*0.9),
        y: rand(H*0.1, H*0.9),
        vx: (Math.random()-0.5)*0.08,
        vy: (Math.random()-0.5)*0.08,
        r: rand(3.5, 6),
        ringPhase: rand(0, Math.PI*2),
        col: pick(),
      });
    }
  }

  function drawGradientLine(x1, y1, x2, y2, col1, col2, alpha) {
    const grad = ctx.createLinearGradient(x1, y1, x2, y2);
    grad.addColorStop(0, 'rgba(' + col1 + ',' + alpha + ')');
    grad.addColorStop(1, 'rgba(' + col2 + ',' + alpha + ')');
    ctx.beginPath();
    ctx.strokeStyle = grad;
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Dark vignette over top-left title area to keep text readable
    const vx = W * 0.0, vy = H * 0.0;
    const vg = ctx.createRadialGradient(W*0.28, H*0.38, 0, W*0.28, H*0.38, W*0.45);
    vg.addColorStop(0,   'rgba(15,17,23,0.82)');
    vg.addColorStop(0.5, 'rgba(15,17,23,0.45)');
    vg.addColorStop(1,   'rgba(15,17,23,0)');
    ctx.fillStyle = vg;
    ctx.fillRect(0, 0, W, H);
    t += 0.012;

    // --- Draw connections between regular nodes ---
    const MAX_DIST = 150;
    for (let i = 0; i < nodes.length; i++) {
      for (let j = i+1; j < nodes.length; j++) {
        if (Math.abs(nodes[i].layer - nodes[j].layer) > 0.01) continue; // only same layer
        const dx = nodes[i].x - nodes[j].x, dy = nodes[i].y - nodes[j].y;
        const dist = Math.sqrt(dx*dx + dy*dy);
        if (dist < MAX_DIST) {
          const a = (1 - dist/MAX_DIST) * nodes[i].alpha * 0.6;
          ctx.lineWidth = 0.7;
          drawGradientLine(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y, nodes[i].col, nodes[j].col, a);
        }
      }
    }

    // --- Draw connections from hubs to nearby nodes ---
    const HUB_DIST = 220;
    for (const h of hubs) {
      for (const n of nodes) {
        const dx = h.x - n.x, dy = h.y - n.y;
        const dist = Math.sqrt(dx*dx + dy*dy);
        if (dist < HUB_DIST) {
          const a = (1 - dist/HUB_DIST) * 0.28;
          ctx.lineWidth = 0.6;
          drawGradientLine(h.x, h.y, n.x, n.y, h.col, n.col, a);
        }
      }
    }

    // --- Draw regular nodes ---
    for (const n of nodes) {
      // Pulse radius
      n.r = n.baseR + Math.sin(t * n.pulseSpeed / 0.012 + n.pulsePhase) * n.baseR * 0.35;

      ctx.beginPath();
      ctx.arc(n.x, n.y, n.r, 0, Math.PI*2);
      ctx.fillStyle = 'rgba(' + n.col + ',' + n.alpha + ')';
      ctx.fill();

      // Soft glow on larger nodes
      if (n.baseR > 1.8) {
        ctx.beginPath();
        ctx.arc(n.x, n.y, n.r * 2.5, 0, Math.PI*2);
        const glow = ctx.createRadialGradient(n.x, n.y, n.r*0.5, n.x, n.y, n.r*2.5);
        glow.addColorStop(0, 'rgba(' + n.col + ',' + (n.alpha*0.3) + ')');
        glow.addColorStop(1, 'rgba(' + n.col + ',0)');
        ctx.fillStyle = glow;
        ctx.fill();
      }

      n.x += n.vx; n.y += n.vy;
      if (n.x < 0 || n.x > W) n.vx *= -1;
      if (n.y < 0 || n.y > H) n.vy *= -1;
    }

    // --- Draw hubs ---
    for (const h of hubs) {
      h.ringPhase += 0.008;

      // Outer expanding ring
      const ringR = h.r + 6 + Math.sin(h.ringPhase) * 4;
      const ringAlpha = 0.08 + Math.sin(h.ringPhase) * 0.05;
      ctx.beginPath();
      ctx.arc(h.x, h.y, ringR, 0, Math.PI*2);
      ctx.strokeStyle = 'rgba(' + h.col + ',' + ringAlpha + ')';
      ctx.lineWidth = 1.2;
      ctx.stroke();

      // Second ring
      const ring2R = h.r + 14 + Math.sin(h.ringPhase + 1) * 6;
      ctx.beginPath();
      ctx.arc(h.x, h.y, ring2R, 0, Math.PI*2);
      ctx.strokeStyle = 'rgba(' + h.col + ',' + (ringAlpha * 0.5) + ')';
      ctx.lineWidth = 0.7;
      ctx.stroke();

      // Core glow
      const grad = ctx.createRadialGradient(h.x, h.y, 0, h.x, h.y, h.r*4);
      grad.addColorStop(0, 'rgba(' + h.col + ',0.55)');
      grad.addColorStop(0.4, 'rgba(' + h.col + ',0.15)');
      grad.addColorStop(1, 'rgba(' + h.col + ',0)');
      ctx.beginPath();
      ctx.arc(h.x, h.y, h.r*4, 0, Math.PI*2);
      ctx.fillStyle = grad;
      ctx.fill();

      // Core dot
      ctx.beginPath();
      ctx.arc(h.x, h.y, h.r, 0, Math.PI*2);
      ctx.fillStyle = 'rgba(' + h.col + ',0.75)';
      ctx.fill();

      h.x += h.vx; h.y += h.vy;
      if (h.x < 0 || h.x > W) h.vx *= -1;
      if (h.y < 0 || h.y > H) h.vy *= -1;
    }

    requestAnimationFrame(draw);
  }

  window.addEventListener('resize', resize);
  resize(); draw();
})();
</script>

<script>
  const GAS_ENDPOINT = 'https://script.google.com/macros/s/AKfycbzPwIbSttYFKqase-sUOnRo4dTYhTPUWRZSygiCLSLuictlmH0E60u6ZTgDVRr_PSkYFw/exec';

  function fileToBase64(file) {
    return new Promise((res, rej) => {
      const r = new FileReader();
      r.onload  = () => res(r.result.split(',')[1]);
      r.onerror = () => rej(new Error('Lettura file fallita'));
      r.readAsDataURL(file);
    });
  }
  function showOverlay(state) {
    const ov = document.getElementById('form-overlay');
    ov.classList.add('active');
    document.getElementById('ov-loading').style.display = state==='loading' ? 'flex' : 'none';
    document.getElementById('ov-success').style.display = state==='success' ? 'flex' : 'none';
    document.getElementById('ov-error').style.display   = state==='error'   ? 'flex' : 'none';
  }
  function closeOverlay() {
    document.getElementById('form-overlay').classList.remove('active');
    document.getElementById('submit-btn').disabled = false;
    document.getElementById('ov-bar').style.width = '0%';
    document.getElementById('ov-loading-detail').textContent = 'Preparazione pacchetto documentale‚Ä¶';
  }
  function setProgress(pct, label) {
    document.getElementById('ov-bar').style.width = pct + '%';
    if (label) document.getElementById('ov-loading-detail').textContent = label;
  }

  document.getElementById('file-allegato').addEventListener('change', function() {
    const zipErr = document.getElementById('zip-error');
    if (this.files && this.files[0]) {
      const fname = this.files[0].name.toLowerCase();
      zipErr.style.display = fname.endsWith('.zip') ? 'none' : 'block';
      if (!fname.endsWith('.zip')) this.value = '';
    }
  });
  document.getElementById('commessa-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    const form = e.target;
    const btn  = document.getElementById('submit-btn');
    if (!form.checkValidity()) { form.reportValidity(); return; }
    // ZIP check
    const fileElCheck = document.getElementById('file-allegato');
    const zipErr = document.getElementById('zip-error');
    if (fileElCheck && fileElCheck.files && fileElCheck.files[0]) {
      const fname = fileElCheck.files[0].name.toLowerCase();
      if (!fname.endsWith('.zip')) {
        zipErr.style.display = 'block';
        fileElCheck.value = '';
        return;
      } else { zipErr.style.display = 'none'; }
    }
    btn.disabled = true;
    showOverlay('loading');
    setProgress(5, 'Lettura documentale in corso‚Ä¶');

    let attachmentBase64 = null, attachmentName = null, attachmentSize = null;
    const fileEl = document.getElementById('file-allegato');
    if (fileEl && fileEl.files && fileEl.files[0]) {
      const file = fileEl.files[0];
      attachmentName = file.name; attachmentSize = file.size;
      try {
        setProgress(20, 'Codifica pacchetto dati‚Ä¶');
        attachmentBase64 = await fileToBase64(file);
        setProgress(55, 'Codifica completata‚Ä¶');
      } catch(err) {
        document.getElementById('ov-error-detail').textContent = 'Impossibile leggere il file allegato.';
        showOverlay('error'); btn.disabled = false; return;
      }
    }

    const payload = {
      nome:                document.getElementById('nome').value.trim(),
      cognome:             document.getElementById('cognome').value.trim(),
      telefono:            document.getElementById('telefono').value.trim(),
      email:               document.getElementById('email').value.trim(),
      pec:                 document.getElementById('pec').value.trim(),
      cf_piva:             document.getElementById('cf-piva').value.trim(),
      indirizzo_fatturazione: document.getElementById('indirizzo-fatt').value.trim(),
      percorso:            document.getElementById('percorso').value,
      note:                document.getElementById('note').value.trim(),
      servizio:            'DWG ‚Üí BIM & Rendering',
      preventivo_totale:   document.getElementById('bim-preventivo-totale').value || '(preventivo non calcolato)',
      preventivo_dettaglio: document.getElementById('bim-preventivo-dettaglio').value || '(preventivo non calcolato)',
      attachment: { name: attachmentName, size: attachmentSize, base64: attachmentBase64 },
      timestamp: new Date().toISOString()
    };

    setProgress(70, 'Trasmissione al server‚Ä¶');
    try {
      const resp = await fetch(GAS_ENDPOINT, { method:'POST', redirect:'follow', body: JSON.stringify(payload) });
      setProgress(95, 'Verifica risposta‚Ä¶');
      if (!resp.ok && resp.type !== 'opaque') throw new Error('Risposta server: ' + resp.status);
      setProgress(100, 'Completato.');
      await new Promise(r => setTimeout(r, 600));
      const ref  = 'PEG-' + Date.now().toString(36).toUpperCase();
      const data = new Date().toLocaleString('it-IT', {day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'});
      document.getElementById('ov-protocol').innerHTML =
        'Ref.: <strong style="color:#dde4f0">' + ref + '</strong><br>Data: ' + dat